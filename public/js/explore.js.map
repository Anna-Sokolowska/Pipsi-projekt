{"version":3,"sources":["webpack:///./resources/js/explore.js"],"names":["typingTimer","movieSearch","document","getElementById","moviesResults","value","API_KEY","HOSTNAME","addEventListener","searchValue","clearTimeout","setTimeout","innerHTML","fetch","then","response","json","data","undefined","iterations","Math","floor","results","length","mergePages","err","console","log","search","i","j","childElementCount","movie","id","poster_path","title"],"mappings":"MAAA,IAIIA,EAJEC,EAAcC,SAASC,eAAe,gBACtCC,EAAgBF,SAASC,eAAe,kBAE9CF,EAAYI,MAAQ,GAGpB,IAAMC,EAAU,mCACVC,EAAW,6CAEjBN,EAAYO,iBAAiB,SAAS,WAElCC,YAAcR,EAAYI,MAC1BK,aAAaV,GACbA,EAAcW,YAAW,WAErBP,EAAcQ,UAAY,GAC1BC,MAAM,GAAD,OAAIN,EAAJ,mBAAuBD,EAAvB,kBAAwCG,cACxCK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACF,QAAYC,IAATD,GAAsC,KAAhBR,YACrBL,EAAcQ,UAAd,mGAIG,CAEH,IAAIO,EAAaC,KAAKC,MAAMJ,EAAKK,QAAQC,QACzCC,EAAWL,EAAYV,iBAXnC,OAeW,SAAAgB,GAAG,OAAIC,QAAQC,IAAIF,MAEX,KAAhBhB,cACCL,EAAcQ,UAAd,qGAKL,QAGP,IAAMY,EAAa,SAACL,EAAYS,GAC5B,IAAI,IAAIC,EAAI,EAAGA,GAAKV,EAAYU,IAC5BhB,MAAM,GAAD,OAAIN,EAAJ,kBAAsBqB,EAAtB,iBAAqCC,EAArC,oBAAkDvB,IAClDQ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAEF,IAAI,IAAIa,EAAI,EAAGA,EAAIb,EAAKK,QAAQC,UAEzBnB,EAAc2B,mBAAqB,IAFFD,IAGpCE,MAAQf,EAAKK,QAAQQ,GAErB1B,EAAcQ,WAAd,4OAIiDoB,MAAMC,GAJvD,oBAI2F,QAAtBD,MAAME,YAAyB,sBAAwB,kCAAoCF,MAAME,YAJtK,iBAI2LF,MAAMG,MAJjM,8EAK8CH,MAAMG,MALpD,oJAOgDH,MAAMC,GAPtD,wNATZ,OAuBW,SAAAR,GAAG,OAAIC,QAAQC,IAAIF,Q","file":"/js/explore.js","sourcesContent":["const movieSearch = document.getElementById('movie-search')\r\nconst moviesResults = document.getElementById('movies-results')\r\n\r\nmovieSearch.value = ''\r\nvar typingTimer\r\n\r\nconst API_KEY = 'c0728c2a52fcc4c251aba15a5fc1a153'\r\nconst HOSTNAME = 'https://api.themoviedb.org/3/search/movie?'\r\n\r\nmovieSearch.addEventListener('input', () => {\r\n\r\n    searchValue = movieSearch.value\r\n    clearTimeout(typingTimer)\r\n    typingTimer = setTimeout(() => {\r\n\r\n        moviesResults.innerHTML = ''\r\n        fetch(`${HOSTNAME}api_key=${API_KEY}&query=${searchValue}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if(data === undefined && searchValue !== '') {\r\n                    moviesResults.innerHTML =\r\n                        `\r\n                        <h2 class=\"mx-auto\">Movies not found :(</h2>\r\n                    `\r\n                } else {\r\n\r\n                    let iterations = Math.floor(data.results.length)\r\n                    mergePages(iterations, searchValue)\r\n\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        if(searchValue === '') {\r\n            moviesResults.innerHTML =\r\n                `\r\n                <h2 class=\"mx-auto\">Type something to search for movies :)</h2>\r\n            `\r\n        }\r\n    }, 1000)\r\n})\r\n\r\nconst mergePages = (iterations, search) => {\r\n    for(let i = 1; i <= iterations; i++) {\r\n        fetch(`${HOSTNAME}&query=${search}&page=${i}&api_key=${API_KEY}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n\r\n                for(let j = 0; j < data.results.length; j++)\r\n                {\r\n                    if(moviesResults.childElementCount >= 40) break\r\n                    movie = data.results[j]\r\n\r\n                    moviesResults.innerHTML +=\r\n                        `\r\n                <div class=\"card border-0 bg-transparent movie-card\" style=\"width: 12rem; float: left;\">\r\n                    <div class=\"card-body p-0\" >\r\n                        <img onclick=\"window.location.href='/movie/${movie.id}'\" src=\"${(movie.poster_path === 'N/A') ? 'images/no_image.png' : 'https://image.tmdb.org/t/p/w185' + movie.poster_path }\" alt=${movie.title}>\r\n                        <h6 class=\"card-title text-center mt-1\">${movie.title}</h6>\r\n                        <form action=\"addMovie\" method=\"post\">\r\n                                <input name=\"movie_api_id\" value=\"${movie.id}\" type=\"hidden\">\r\n                                <button type=\"submit\" name=\"add\" class=\"btn btn-primary\" >Add</button>\r\n                            </form>\r\n                    </div>\r\n                </div>`\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n"],"sourceRoot":""}